<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Calendrier Anime Prototype</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #191919;
    display: flex;
    justify-content: center;
    padding: 20px;
    color: #fff;
  }

  .calendar-container {
    width: 100%;
    max-width: 900px;
  }

  /* Mois et flèches */
  .month-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
  }

  .month-title {
    font-size: 28px; /* un peu plus grand */
    font-weight: bold;
  }

  .arrow {
    cursor: pointer;
    font-size: 32px; /* plus gros */
    user-select: none;
  }
  .arrow.disabled {
    opacity: 0.3;
    cursor: default;
  }

  .calendar-weekdays {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 5px;
    margin-bottom: 5px;
  }

  .weekday {
    text-align: center;
    font-weight: bold;
    color: #ccc;
  }

  .calendar {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 5px;
    position: relative;
  }

  .day {
    background: #2b2b2b;
    padding: 10px;
    min-height: 100px;
    border-radius: 8px;
    position: relative;
    cursor: pointer;
    transition: transform 0.1s, box-shadow 0.1s;
  }
  .day:hover {
    transform: scale(1.03);
    box-shadow: 0 2px 10px rgba(255,255,255,0.2);
  }

  .day-number {
    font-weight: bold;
    margin-bottom: 5px;
  }

  .anime-rep {
    width: 100%;
    height: 10px;
    border-radius: 4px;
    margin-bottom: 3px;
  }

  /* Popup */
  .anime-popup {
    display: none;
    position: absolute;
    background: #2b2b2b;
    border: 1px solid #444;
    padding: 10px;
    z-index: 9999;
    border-radius: 10px;
    box-shadow: 0 2px 15px rgba(255,255,255,0.3);
    width: 250px;
  }

  .anime-popup .close-btn {
    float: right;
    cursor: pointer;
    font-weight: bold;
    color: #888;
  }

  .anime-item {
    margin-bottom: 8px;
    padding: 5px;
    border-left: 4px solid #000;
    font-size: 14px;
  }
</style>
</head>
<body>

<div class="calendar-container">
  <div class="month-header">
    <div class="arrow" id="prev-month">&#8592;</div>
    <div class="month-title" id="month-title"></div>
    <div class="arrow" id="next-month">&#8594;</div>
  </div>

  <div class="calendar-weekdays">
    <div class="weekday">Lun</div>
    <div class="weekday">Mar</div>
    <div class="weekday">Mer</div>
    <div class="weekday">Jeu</div>
    <div class="weekday">Ven</div>
    <div class="weekday">Sam</div>
    <div class="weekday">Dim</div>
  </div>

  <div class="calendar" id="calendar"></div>
</div>

<div class="anime-popup" id="anime-popup">
  <div class="close-btn" id="popup-close">x</div>
  <div id="popup-content"></div>
</div>

<script>
  // Données simulées réalistes avec saisons
  const animeData = [];

  // Frieren S2 tous les vendredis du 16 janvier au 13 février
  let frierenDate = new Date("2026-01-16");
  for (let i = 0; i < 5; i++) {
    animeData.push({ title: "Frieren S2", date: frierenDate.toISOString().split('T')[0], time: "20:00", ep: i+1, color: "#2ecc71" });
    frierenDate.setDate(frierenDate.getDate() + 7); // tous les vendredis
  }

  // Autres exemples
  animeData.push({ title: "Jujutsu Kaisen S2", date: "2026-01-16", time: "19:00", ep: 1, color: "#3498db" });
  animeData.push({ title: "One Piece", date: "2026-01-18", time: "10:00", ep: 1015, color: "#e74c3c" });
  animeData.push({ title: "Naruto Shippuden", date: "2026-01-25", time: "21:00", ep: 400, color: "#f1c40f" });

  const calendarEl = document.getElementById("calendar");
  const monthTitleEl = document.getElementById("month-title");
  const popup = document.getElementById("anime-popup");
  const popupContent = document.getElementById("popup-content");
  const popupClose = document.getElementById("popup-close");
  const prevArrow = document.getElementById("prev-month");
  const nextArrow = document.getElementById("next-month");

  const currentYear = new Date().getFullYear();
  const startMonth = new Date(currentYear,0,1); // 1er janvier de cette année
  const endMonth = new Date(currentYear+1,0,1); // 1er janvier de l'année prochaine

  let currentDate = new Date(startMonth);

  function renderCalendar(date) {
    calendarEl.innerHTML = "";
    const year = date.getFullYear();
    const month = date.getMonth();
    monthTitleEl.textContent = date.toLocaleString("fr-FR", { month: "long", year: "numeric" });

    // Gestion flèches
    prevArrow.classList.toggle("disabled", date <= startMonth);
    nextArrow.classList.toggle("disabled", date >= endMonth);

    const daysInMonth = new Date(year, month + 1, 0).getDate();
    const firstDay = new Date(year, month, 1).getDay();
    const offset = firstDay === 0 ? 6 : firstDay - 1;

    for (let i = 0; i < offset + daysInMonth; i++) {
      const dayEl = document.createElement("div");
      dayEl.className = "day";

      if (i >= offset) {
        const dayNum = i - offset + 1;
        dayEl.innerHTML = `<div class="day-number">${dayNum}</div>`;
        const dateStr = `${year}-${String(month+1).padStart(2,"0")}-${String(dayNum).padStart(2,"0")}`;
        const animeToday = animeData.filter(a => a.date === dateStr);

        animeToday.forEach(a => {
          const rep = document.createElement("div");
          rep.className = "anime-rep";
          rep.style.backgroundColor = a.color;
          dayEl.appendChild(rep);
        });

        if (animeToday.length > 0) {
          dayEl.onclick = (e) => {
            popupContent.innerHTML = "";
            animeToday.forEach(a => {
              const item = document.createElement("div");
              item.className = "anime-item";
              item.style.borderLeftColor = a.color;
              item.innerHTML = `<strong>${a.title}</strong><br>Ep ${a.ep} - ${a.time}`;
              popupContent.appendChild(item);
            });
            // Popup à côté de la case
            const rect = dayEl.getBoundingClientRect();
            popup.style.top = (rect.bottom + window.scrollY + 5) + "px";
            popup.style.left = (rect.left + window.scrollX) + "px";
            popup.style.display = "block";
          };
        }
      }

      calendarEl.appendChild(dayEl);
    }
  }

  // Navigation
  prevArrow.onclick = () => {
    if (currentDate <= startMonth) return;
    currentDate.setMonth(currentDate.getMonth() - 1);
    renderCalendar(currentDate);
  };
  nextArrow.onclick = () => {
    if (currentDate >= endMonth) return;
    currentDate.setMonth(currentDate.getMonth() + 1);
    renderCalendar(currentDate);
  };

  popupClose.onclick = () => {
    popup.style.display = "none";
  };

  renderCalendar(currentDate);
</script>

</body>
</html>
